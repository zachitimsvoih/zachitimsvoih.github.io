<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LegalFortConsulting — юридические услуги в Москве</title>
  <meta name="description" content="LegalFortConsulting — профессиональная юридическая помощь в Москве: консультации, суды, договоры, сопровождение бизнеса, военнослужащих и вопросы военного права. Конфиденциально и результативно.">

  <style>
    /* =========================
       Цвета и базовые стили
    ========================== */
    :root {
      --bg: #f4efe8;
      --card: #ffffff;
      --accent: #3a2f2a;
      --muted: #6b625c;
      --text: #1f1b18;
      --border: #e3dbd2;
    }

    *, *::before, *::after { box-sizing: border-box; }
    body {
      font-family: Inter, system-ui, 'Segoe UI', Roboto, Arial;
      line-height: 1.6;
      margin: 0;
      color: var(--text);
      background: var(--bg);
    }

    header {
      background: rgba(244,239,232,0.9);
      backdrop-filter: blur(6px);
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid var(--border);
    }

    .container { max-width: 1120px; margin: 0 auto; padding: 22px; }

    /* =========================
       Навигация
    ========================== */
    .nav { display: flex; gap: 18px; align-items: center; justify-content: space-between; position: relative; }
    .brand { display: flex; align-items: center; gap: 12px; }

    /* Логотип */
    .logo { width: 120px; height: 120px; border-radius: 12px; overflow: hidden; display: flex; align-items: center; justify-content: center; background:#fff; }

    nav.menu a { color: var(--muted); text-decoration: none; font-weight: 600; margin-right: 12px; }
    nav.menu a:hover { color: var(--accent); }

    /* Бургер-кнопка */
    .burger { display: none; background: none; border: none; cursor: pointer; padding: 8px; position: relative; z-index: 101; }
    .burger span {
      display: block;
      width: 26px;
      height: 3px;
      background: var(--accent);
      margin: 5px 0;
      border-radius: 2px;
      transition: 0.4s;
    }
    .burger.active span:nth-child(1) { transform: rotate(45deg) translate(5px,5px); }
    .burger.active span:nth-child(2) { opacity: 0; }
    .burger.active span:nth-child(3) { transform: rotate(-45deg) translate(5px,-5px); }

    /* =========================
       Секции
    ========================== */
    section { padding: 36px 0; border-top: 1px solid rgba(0,0,0,0.03); }
    h1,h2,h3 { letter-spacing: -0.2px; }

    /* Hero / Главный блок */
    .hero { display: grid; grid-template-columns: 1fr 380px; gap: 32px; align-items: center; }
    .badge { display:inline-block; background:#ede4da; color:var(--accent); padding:6px 12px; border-radius:999px; font-weight:700; margin-bottom:14px; }
    h1 { font-size:30px; margin:0 0 14px; }
    .lead { color:var(--muted); margin:0 0 22px; }

    .cta { display:flex; gap:14px; flex-wrap:wrap; }
    .btn { background:var(--accent); color:#fff; padding:13px 18px; border-radius:10px; border:0; cursor:pointer; font-weight:700; }
    .btn.ghost { background:transparent; color:var(--accent); border:2px solid var(--accent); }

    .card { background:var(--card); padding:20px; border-radius:14px; border:1px solid var(--border); box-shadow:0 8px 22px rgba(0,0,0,0.04); }

    /* Сетки */
    .services { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-top:22px; }
    .service { display: flex; flex-direction: column; }
    .service img { width: 100%; height: 180px; object-fit: cover; border-radius: 8px; margin-bottom: 12px; }
    .service strong { display:block; margin-bottom:6px; }

    .cols { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
    .grid-3 { display:grid; grid-template-columns:repeat(3,1fr); gap:18px; }

    .phone { font-weight:800; color:var(--accent); }
    .lead-small { color:var(--muted); font-size:15px; }

    form input, form textarea { width:100%; padding:11px; border:1px solid var(--border); border-radius:8px; margin-bottom:12px; font-family:inherit; }
    form button { width:100%; }

    footer { 
      padding:40px 0; 
      color:var(--muted); 
      font-size:14px; 
      background: var(--card);
      border-top: 1px solid var(--border);
      margin-top: 40px;
    }

    .footer-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    .footer-contacts {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .footer-contacts h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
      margin: 0 0 16px 0;
      letter-spacing: -0.2px;
    }

    .footer-contact-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 8px 0;
    }

    .footer-contact-label {
      font-weight: 600;
      color: var(--accent);
      min-width: 80px;
      font-size: 14px;
    }

    .footer-contact-value {
      color: var(--text);
      font-weight: 500;
      font-size: 15px;
    }

    .footer-contact-value.phone {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    .footer-contact-value a:hover {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }

    .footer-bottom {
      padding-top: 20px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 13px;
    }

    @media (max-width: 900px) {
      .footer-content {
        grid-template-columns: 1fr;
        gap: 24px;
      }
    }

    /* =========================
       Карусель для дипломов
    ========================== */
    .carousel-container {
      position: relative;
      overflow: hidden;
      border-radius: 14px;
      margin-top: 14px;
      cursor: grab;
      user-select: none;
    }

    .carousel-container:active {
      cursor: grabbing;
    }

    .carousel-track {
      display: flex;
      gap: 18px;
      transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      will-change: transform;
    }

    .carousel-track.dragging {
      transition: none;
      cursor: grabbing;
    }

    .carousel-item {
      min-width: calc(33.333% - 12px);
      flex-shrink: 0;
    }

    .carousel-item img {
      width: 100%;
      max-width: 100%;
      height: auto;
      max-height: 500px;
      object-fit: contain;
      display: block;
      border-radius: 8px;
    }

    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 16px;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--border);
      border: none;
      cursor: pointer;
      padding: 0;
      transition: background 0.3s;
    }

    .carousel-dot.active {
      background: var(--accent);
    }

    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid var(--border);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      transition: background 0.3s;
      font-size: 20px;
      color: var(--accent);
    }

    .carousel-nav:hover {
      background: var(--card);
    }

    .carousel-nav.prev {
      left: 10px;
    }

    .carousel-nav.next {
      right: 10px;
    }

    @media (max-width: 900px) {
      .carousel-nav {
        display: none;
      }
      .carousel-item {
        min-width: calc(50% - 9px);
      }
      .carousel-item img {
        max-height: 400px;
      }
    }
    
    @media (max-width: 520px) {
      .carousel-item {
        min-width: 100%;
      }
      .carousel-item img {
        max-height: 300px;
      }
    }

    /* =========================
       Адаптивность / Бургер
    ========================== */
    @media(max-width:900px){
      .hero{grid-template-columns:1fr; gap:24px;}
      .services{grid-template-columns:repeat(2,1fr);}
      .grid-3{grid-template-columns:1fr}
      .burger{display:block;}
      nav.menu{
        display:none; 
        position:absolute; 
        top:100%; 
        right:0; 
        background:#fff; 
        border:1px solid var(--border); 
        border-radius:12px; 
        box-shadow:0 10px 30px rgba(0,0,0,0.08); 
        flex-direction:column; 
        padding:12px; 
        min-width:220px; 
        z-index:100;
      }
      nav.menu.active{display:flex;}
      nav.menu a{padding:10px 12px; border-radius:8px;}
      nav.menu a:hover{background:#f4efe8;}
      /* Полупрозрачный фон */
      #menuOverlay {
        display:none;
        position:fixed;
        top:0; left:0; width:100%; height:100%;
        background: rgba(0,0,0,0.3);
        z-index:99;
      }
      #menuOverlay.active { display:block; }
    }

    @media(max-width:520px){.services{grid-template-columns:1fr}}

    /* =========================
       Модальное окно согласия
    ========================== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(4px);
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--card);
      border-radius: 16px;
      padding: 32px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal h3 {
      font-size: 22px;
      font-weight: 700;
      color: var(--accent);
      margin: 0 0 16px 0;
    }

    .modal p {
      color: var(--text);
      line-height: 1.7;
      margin: 0 0 20px 0;
      font-size: 15px;
    }

    .modal-checkbox {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin: 20px 0;
      cursor: pointer;
    }

    .modal-checkbox input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      margin-top: 2px;
      flex-shrink: 0;
    }

    .modal-checkbox label {
      cursor: pointer;
      color: var(--text);
      font-size: 14px;
      line-height: 1.6;
    }

    .modal-checkbox label a {
      color: var(--accent);
      text-decoration: underline;
    }

    .modal-buttons {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .modal-buttons button {
      flex: 1;
    }

    .btn-secondary {
      background: transparent;
      color: var(--accent);
      border: 2px solid var(--accent);
    }

    .btn-secondary:hover {
      background: var(--accent);
      color: #fff;
    }
  </style>
</head>
<body>

<!-- =========================
     Overlay для меню
========================== -->
<div id="menuOverlay"></div>

<!-- =========================
     Хедер / Навигация
========================== -->
<header>
  <div class="container nav">
    <div class="brand">
      <!-- Логотип компании -->
      <div class="logo">
        <img src="assets/logo.jpg" alt="LegalFortConsulting" style="width:100%;height:100%;object-fit:cover;border-radius:12px">
      </div>
      <div>
        <div style="font-weight:800">LegalFortConsulting</div>
        <div style="font-size:13px;color:var(--muted)">Юридические услуги — Москва</div>
      </div>
    </div>

    <!-- Бургер-кнопка -->
    <button class="burger" id="burgerBtn" aria-label="Открыть меню">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Меню -->
    <nav class="menu" id="mobileMenu">
      <a href="#services">Услуги</a>
      <a href="#about">О компании</a>
      <a href="#prices">Стоимость</a>
      <a href="#contacts" class="menu-cta">Консультация</a>
    </nav>
  </div>
</header>

<main class="container">

<!-- =========================
     Hero блок
========================== -->
<section class="hero">
  <!-- Левый блок: текст + "Наш подход" -->
  <div>
    <div>
      <div class="badge">Надёжная правовая защита</div>
      <h1>Юридическая помощь в Москве для бизнеса, частных лиц и военнослужащих</h1>
      <p class="lead">LegalFortConsulting — команда практикующих юристов. Консультации по гражданскому, военному праву, контрактной службе, вопросам СВО. Работаем только за результат, конфиденциально и в интересах клиента.</p>
      <div class="cta">
        <button class="btn" onclick="document.getElementById('contacts').scrollIntoView({behavior:'smooth'})">Получить консультацию</button>
        <a class="btn ghost" href="#services">Смотреть услуги</a>
      </div>
    </div>

    <!-- Карточка "Наш подход" -->
    <div class="card" style="display:flex; align-items:flex-start; gap:16px; flex-wrap:wrap; margin-top:26px;">
      <div style="flex:1; min-width:200px;">
        <strong>Наш подход</strong>
        <ul style="margin:10px 0 0; padding-left:18px">
          <li>Глубокий анализ ситуации до начала работы</li>
          <li>Прозрачная стратегия и понятные шаги</li>
          <li>Юридическая ответственность за результат</li>
        </ul>
      </div>
      <div style="flex:0 0 200px;">
        <img src="assets/podhod.jpg" alt="Наш подход" style="width:100%; border-radius:8px; display:block;">
      </div>
    </div>
  </div>

  <!-- Правый блок: "Связаться с нами" -->
  <aside class="card" style="flex:0 0 300px; min-width:250px;">
    <div style="font-size:14px;color:var(--muted)">Связаться с нами</div>
    <div class="phone" style="font-size:18px;margin:6px 0">+7 (910) 437‑54‑90</div>
    <div class="lead-small">Telegram / WhatsApp</div>
    <hr style="margin:14px 0;border:none;border-top:1px solid var(--border)">
    <div class="lead-small">Режим работы</div>
    <div style="font-weight:700">Пн–Вс: 10:00–20:00</div>
    <button class="btn" style="margin-top:14px" onclick="document.getElementById('contacts').scrollIntoView({behavior:'smooth'})">Оставить заявку</button>
  </aside>
</section>

<!-- =========================
     Услуги
========================== -->
<section id="services">
  <h2>Юридические услуги</h2>
  <p class="lead-small">Комплексное сопровождение — от консультации до полного разрешения ситуации, включая военно-правовые вопросы.</p>
  <div class="services">
    <div class="card service">
      <img src="assets/service1.jpg" alt="Юридические консультации">
      <strong>Юридические консультации</strong>
      <p class="lead-small">Очные и дистанционные консультации, правовой анализ, включая военнослужащих и контракт СВО.</p>
    </div>
    <div class="card service">
      <img src="assets/service2.jpg" alt="Судебная защита">
      <strong>Судебная защита</strong>
      <p class="lead-small">Представительство в судах всех инстанций, включая споры по контрактной службе.</p>
    </div>
    <div class="card service">
      <img src="assets/service3.jpg" alt="Договорное право">
      <strong>Договорное право</strong>
      <p class="lead-small">Разработка, проверка, сопровождение сделок.</p>
    </div>
    <div class="card service">
      <img src="assets/service4.jpg" alt="Семейные споры">
      <strong>Семейные споры</strong>
      <p class="lead-small">Разводы, алименты, раздел имущества.</p>
    </div>
    <div class="card service">
      <img src="assets/service5.jpg" alt="Наследственные дела">
      <strong>Наследственные дела</strong>
      <p class="lead-small">Вступление в наследство, споры, защита долей.</p>
    </div>
    <div class="card service">
      <img src="assets/service6.jpg" alt="Бизнес‑сопровождение">
      <strong>Бизнес‑сопровождение</strong>
      <p class="lead-small">Абонентское юридическое обслуживание компаний.</p>
    </div>
  </div>
</section>

<!-- =========================
     Сертификаты / дипломы
========================== -->
<section id="trust">
  <h2>Наши сертификаты и дипломы</h2>
  <div class="carousel-container">
    <div class="carousel-track" id="carouselTrack">
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom1.jpg" alt="Диплом 1">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom2.jpg" alt="Диплом 2">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom3.jpg" alt="Диплом 3">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom4.jpg" alt="Диплом 4">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom5.jpg" alt="Диплом 5">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom6.jpg" alt="Диплом 6">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom7.jpg" alt="Диплом 7">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom8.jpg" alt="Диплом 8">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom9.jpg" alt="Диплом 9">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
      <div class="carousel-item">
        <div class="card">
          <img src="assets/diplom10.jpg" alt="Диплом 10">
          <p class="lead-small" style="margin-top: 12px;">Диплом / сертификат</p>
        </div>
      </div>
    </div>
    <button class="carousel-nav prev" id="carouselPrev" aria-label="Предыдущий">‹</button>
    <button class="carousel-nav next" id="carouselNext" aria-label="Следующий">›</button>
    <div class="carousel-controls" id="carouselDots"></div>
  </div>
</section>

<!-- =========================
     О компании
========================== -->
<section id="about">
  <h2>О компании</h2>
  <div class="cols">
    <div class="card">
      <h3 style="font-size: 20px; font-weight: 700; color: var(--accent); margin: 0 0 16px 0;">LegalFortConsulting</h3>
      <p class="lead-small" style="margin-bottom: 16px;">Команда практикующих юристов с многолетним опытом работы в различных областях права. Мы специализируемся на предоставлении комплексной юридической помощи частным лицам, бизнесу и военнослужащим.</p>
      <p class="lead-small" style="margin-bottom: 16px;">Наша миссия — обеспечить надежную правовую защиту и сопровождение наших клиентов на всех этапах решения их правовых вопросов.</p>
      <div style="margin-top: 20px;">
        <strong style="color: var(--accent); display: block; margin-bottom: 12px;">Наши преимущества:</strong>
        <ul style="margin: 0; padding-left: 20px; color: var(--text); line-height: 1.8;">
          <li>Глубокий анализ ситуации до начала работы</li>
          <li>Прозрачная стратегия и понятные шаги</li>
          <li>Юридическая ответственность за результат</li>
          <li>Конфиденциальность и защита интересов клиента</li>
          <li>Опыт работы с военнослужащими и вопросами военного права</li>
        </ul>
      </div>
    </div>
    <div class="card">
      <h3 style="font-size: 20px; font-weight: 700; color: var(--accent); margin: 0 0 16px 0;">Наш подход</h3>
      <p class="lead-small" style="margin-bottom: 16px;">Мы работаем только за результат. Каждое дело для нас — это возможность помочь клиенту решить его проблему максимально эффективно и в кратчайшие сроки.</p>
      <p class="lead-small">Наша команда постоянно повышает квалификацию и следит за изменениями в законодательстве, чтобы предоставлять актуальные и эффективные юридические услуги.</p>
    </div>
  </div>
</section>

<!-- =========================
     Контакты / Форма заявки
========================== -->
<section id="contacts">
  <h2>Контакты</h2>
  <div class="cols">
    <div class="card" style="display: flex; flex-direction: column; gap: 16px;">
      <h3 style="font-size: 20px; font-weight: 700; color: var(--accent); margin: 0 0 8px 0;">Контакты</h3>
      <div style="display: flex; flex-direction: column; gap: 14px;">
        <div style="display: flex; align-items: flex-start; gap: 12px;">
          <strong style="color: var(--accent); min-width: 90px; font-size: 15px;">Город:</strong>
          <span style="color: var(--text); font-weight: 500; font-size: 15px;">Москва</span>
        </div>
        <div style="display: flex; align-items: flex-start; gap: 12px;">
          <strong style="color: var(--accent); min-width: 90px; font-size: 15px;">Телефон:</strong>
          <span class="phone" style="font-size: 17px; font-weight: 700;">+7 (910) 437‑54‑90</span>
        </div>
        <div style="display: flex; align-items: flex-start; gap: 12px;">
          <strong style="color: var(--accent); min-width: 90px; font-size: 15px;">Email:</strong>
          <a href="mailto:evgeshon11@mail.ru" style="color: var(--text); font-weight: 500; font-size: 15px; text-decoration: none; border-bottom: 1px solid var(--border); transition: color 0.2s;">evgeshon11@mail.ru</a>
        </div>
      </div>
    </div>

    <div class="card">
      <form id="contactForm">
        <input type="text" name="name" placeholder="Ваше имя" required>
        <input type="tel" name="phone" placeholder="Пример: +7 (999) 123‑45‑67" required>
        <input type="text" name="source" placeholder="Город" required>
        <textarea name="message" rows="4" placeholder="Кратко опишите вопрос"></textarea>
        <button type="submit" class="btn">Отправить заявку</button>
        <div id="form-status" style="margin-top:8px;color:green;"></div>
      </form>
    </div>
  </div>
</section>

</main>

<!-- =========================
     Футер
========================== -->
<footer>
  <div class="container">
    <div class="footer-content">
      <div class="footer-contacts">
        <h3>Контакты</h3>
        <div class="footer-contact-item">
          <span class="footer-contact-label">Город:</span>
          <span class="footer-contact-value">Москва</span>
        </div>
        <div class="footer-contact-item">
          <span class="footer-contact-label">Телефон:</span>
          <span class="footer-contact-value phone">+7 (910) 437‑54‑90</span>
        </div>
        <div class="footer-contact-item">
          <span class="footer-contact-label">Email:</span>
          <a href="mailto:evgeshon11@mail.ru" class="footer-contact-value" style="text-decoration: none; border-bottom: 1px solid var(--border); transition: color 0.2s;">evgeshon11@mail.ru</a>
        </div>
        <div class="footer-contact-item">
          <span class="footer-contact-label">Режим работы:</span>
          <span class="footer-contact-value">Пн–Вс: 10:00–20:00</span>
        </div>
      </div>
      <div style="display: flex; flex-direction: column; gap: 12px;">
        <h3 style="font-size: 18px; font-weight: 700; color: var(--accent); margin: 0 0 16px 0; letter-spacing: -0.2px;">О компании</h3>
        <p style="color: var(--muted); line-height: 1.7; margin: 0;">LegalFortConsulting — профессиональная юридическая помощь в Москве. Консультации, суды, договоры, сопровождение бизнеса.</p>
      </div>
    </div>
    <div class="footer-bottom">
      <div>© LegalFortConsulting, Москва</div>
      <div>Политика конфиденциальности</div>
    </div>
  </div>
</footer>

<!-- =========================
     Модальное окно согласия на обработку персональных данных
========================== -->
<div class="modal-overlay" id="consentModal">
  <div class="modal">
    <h3>Согласие на обработку персональных данных</h3>
    <p>Отправляя заявку, вы даете согласие на обработку ваших персональных данных в соответствии с Федеральным законом № 152-ФЗ «О персональных данных».</p>
    <p>Мы используем предоставленные вами данные исключительно для связи с вами и обработки вашей заявки. Ваши данные не будут переданы третьим лицам без вашего согласия.</p>
    <div class="modal-checkbox">
      <input type="checkbox" id="consentCheckbox" required>
      <label for="consentCheckbox">
        Я согласен(а) на обработку персональных данных и подтверждаю, что ознакомлен(а) с 
        <a href="#" onclick="event.preventDefault(); alert('Политика конфиденциальности будет размещена здесь');">политикой конфиденциальности</a>
      </label>
    </div>
    <div class="modal-buttons">
      <button type="button" class="btn btn-secondary" id="consentCancel">Отмена</button>
      <button type="button" class="btn" id="consentAccept">Принять и отправить</button>
    </div>
  </div>
</div>

<!-- =========================
     JS: форма + бургер + overlay + карусель
========================== -->
<script>
// ===== Бургер меню =====
const burger = document.querySelector(".burger");
const menu = document.querySelector("nav.menu");
const overlay = document.querySelector("#menuOverlay");

if (burger && menu && overlay) {
    const toggleMenu = () => {
        burger.classList.toggle('active');
        menu.classList.toggle('active');
        overlay.classList.toggle('active');
    };
    const closeMenu = () => {
        burger.classList.remove('active');
        menu.classList.remove('active');
        overlay.classList.remove('active');
    };
    burger.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', closeMenu);
    document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
                if (burger.classList.contains('active')) closeMenu();
            }
        });
    });
}

// ===== Карусель для дипломов =====
(function() {
    const track = document.getElementById('carouselTrack');
    const prevBtn = document.getElementById('carouselPrev');
    const nextBtn = document.getElementById('carouselNext');
    const dotsContainer = document.getElementById('carouselDots');
    const carouselContainer = track ? track.closest('.carousel-container') : null;
    
    if (!track || !prevBtn || !nextBtn || !dotsContainer || !carouselContainer) return;
    
    const items = track.querySelectorAll('.carousel-item');
    const totalItems = items.length;
    let currentIndex = 0;
    
    // Переменные для перетаскивания
    let isDragging = false;
    let startX = 0;
    let currentX = 0;
    let startTranslate = 0;
    let currentTranslate = 0;
    let animationID = 0;
    let velocity = 0;
    let lastX = 0;
    let lastTime = 0;
    
    // Определяем количество видимых элементов в зависимости от ширины экрана
    function getVisibleCount() {
        if (window.innerWidth <= 520) return 1;
        if (window.innerWidth <= 900) return 2;
        return 3;
    }
    
    // Вычисляем количество слайдов (групп)
    function getTotalSlides() {
        const visible = getVisibleCount();
        return Math.ceil(totalItems / visible);
    }
    
    // Получаем позицию для слайда
    function getPositionByIndex(index) {
        const visible = getVisibleCount();
        const containerWidth = track.parentElement.offsetWidth;
        const gap = 18;
        const itemWidth = (containerWidth - (gap * (visible - 1))) / visible;
        return index * visible * (itemWidth + gap);
    }
    
    // Создание точек навигации
    function createDots() {
        dotsContainer.innerHTML = '';
        const totalSlides = getTotalSlides();
        for (let i = 0; i < totalSlides; i++) {
            const dot = document.createElement('button');
            dot.className = 'carousel-dot' + (i === 0 ? ' active' : '');
            dot.setAttribute('aria-label', 'Перейти к слайду ' + (i + 1));
            dot.addEventListener('click', () => goToSlide(i));
            dotsContainer.appendChild(dot);
        }
    }
    
    function updateCarousel(smooth = true) {
        if (smooth) {
            track.style.transition = 'transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        } else {
            track.style.transition = 'none';
        }
        
        const translateX = getPositionByIndex(currentIndex);
        track.style.transform = `translateX(-${translateX}px)`;
        
        // Обновление точек
        const dots = dotsContainer.querySelectorAll('.carousel-dot');
        dots.forEach((dot, index) => {
            dot.classList.toggle('active', index === currentIndex);
        });
    }
    
    function goToSlide(index) {
        const totalSlides = getTotalSlides();
        currentIndex = Math.max(0, Math.min(index, totalSlides - 1));
        updateCarousel(true);
    }
    
    function nextSlide() {
        const totalSlides = getTotalSlides();
        currentIndex = (currentIndex + 1) % totalSlides;
        updateCarousel(true);
    }
    
    function prevSlide() {
        const totalSlides = getTotalSlides();
        currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
        updateCarousel(true);
    }
    
    // Функции для перетаскивания
    function getEventX(e) {
        return e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
    }
    
    function startDrag(e) {
        if (e.type === 'mousedown' && e.button !== 0) return;
        if (e.type === 'touchstart' && e.touches.length !== 1) return;
        
        isDragging = true;
        startX = getEventX(e);
        startTranslate = getPositionByIndex(currentIndex);
        velocity = 0;
        lastX = startX;
        lastTime = Date.now();
        
        track.classList.add('dragging');
        carouselContainer.style.cursor = 'grabbing';
        
        if (e.type === 'mousedown') {
            e.preventDefault();
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', endDrag);
        } else {
            document.addEventListener('touchmove', drag, { passive: false });
            document.addEventListener('touchend', endDrag);
        }
    }
    
    function drag(e) {
        if (!isDragging) return;
        
        e.preventDefault();
        currentX = getEventX(e);
        const diff = currentX - startX;
        currentTranslate = startTranslate - diff;
        
        // Вычисляем скорость для инерции
        const now = Date.now();
        const timeDiff = now - lastTime;
        if (timeDiff > 0) {
            velocity = (currentX - lastX) / timeDiff;
        }
        lastX = currentX;
        lastTime = now;
        
        track.style.transition = 'none';
        track.style.transform = `translateX(-${currentTranslate}px)`;
    }
    
    function endDrag() {
        if (!isDragging) return;
        
        isDragging = false;
        track.classList.remove('dragging');
        carouselContainer.style.cursor = 'grab';
        
        document.removeEventListener('mousemove', drag);
        document.removeEventListener('mouseup', endDrag);
        document.removeEventListener('touchmove', drag);
        document.removeEventListener('touchend', endDrag);
        
        // Применяем инерцию
        const visible = getVisibleCount();
        const containerWidth = track.parentElement.offsetWidth;
        const gap = 18;
        const itemWidth = (containerWidth - (gap * (visible - 1))) / visible;
        const slideWidth = visible * (itemWidth + gap);
        
        // Определяем направление и силу инерции
        const threshold = slideWidth * 0.3; // 30% от ширины слайда
        const inertiaDistance = velocity * 200; // Коэффициент инерции
        
        let targetTranslate = currentTranslate + inertiaDistance;
        
        // Находим ближайший слайд
        const totalSlides = getTotalSlides();
        let newIndex = Math.round(targetTranslate / slideWidth);
        newIndex = Math.max(0, Math.min(newIndex, totalSlides - 1));
        
        // Если перетащили достаточно далеко, переключаем слайд
        const diff = currentTranslate - getPositionByIndex(currentIndex);
        if (Math.abs(diff) > threshold) {
            if (diff > 0) {
                newIndex = Math.min(currentIndex + 1, totalSlides - 1);
            } else {
                newIndex = Math.max(currentIndex - 1, 0);
            }
        } else {
            newIndex = currentIndex;
        }
        
        currentIndex = newIndex;
        updateCarousel(true);
    }
    
    // Инициализация
    createDots();
    updateCarousel();
    
    // Обработка изменения размера окна
    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            createDots();
            currentIndex = 0;
            updateCarousel();
        }, 250);
    });
    
    // Обработчики перетаскивания
    carouselContainer.addEventListener('mousedown', startDrag);
    carouselContainer.addEventListener('touchstart', startDrag, { passive: true });
    
    // Кнопки навигации
    prevBtn.addEventListener('click', prevSlide);
    nextBtn.addEventListener('click', nextSlide);
    
    // Автопрокрутка (останавливается при перетаскивании)
    let autoPlayInterval = setInterval(() => {
        if (!isDragging) {
            nextSlide();
        }
    }, 5000);
    
    // Остановка автопрокрутки при наведении
    carouselContainer.addEventListener('mouseenter', () => clearInterval(autoPlayInterval));
    carouselContainer.addEventListener('mouseleave', () => {
        autoPlayInterval = setInterval(() => {
            if (!isDragging) {
                nextSlide();
            }
        }, 5000);
    });
})();

// ===== Модальное окно согласия и форма =====
const consentModal = document.getElementById('consentModal');
const consentCheckbox = document.getElementById('consentCheckbox');
const consentAccept = document.getElementById('consentAccept');
const consentCancel = document.getElementById('consentCancel');
const contactForm = document.getElementById("contactForm");
const formStatus = document.getElementById("form-status");
const API_URL = "https://script.google.com/macros/s/AKfycbz0YibnEhifXUu0_FeTF_6va0ve2RtwO2QAMsE5rrPQ7JkbAH3CYg675Ht8wEikZj--Eg/exec";

let formDataToSubmit = null, formElement = null;

if (consentModal && consentCheckbox && consentAccept && consentCancel && contactForm) {
    const closeConsentModal = () => {
        consentModal.classList.remove('active');
        consentCheckbox.checked = false;
        formDataToSubmit = null;
        formElement = null;
    };
    const openConsentModal = (data, form) => {
        formDataToSubmit = data;
        formElement = form;
        consentModal.classList.add('active');
        consentCheckbox.checked = false;
    };
    consentCancel.addEventListener('click', closeConsentModal);
    consentModal.addEventListener('click', (e) => e.target === consentModal && closeConsentModal());
    
    contactForm.addEventListener("submit", function(e) {
        e.preventDefault();
        const name = this.querySelector('[name="name"]').value.trim();
        const phone = this.querySelector('[name="phone"]').value.trim();
        const source = this.querySelector('[name="source"]').value.trim();
        const message = this.querySelector('[name="message"]').value.trim();
        if (!name || !phone || !source) {
            if (formStatus) {
                formStatus.innerText = "Пожалуйста, заполните все обязательные поля.";
                formStatus.style.color = "red";
            }
            return;
        }
        const formDataToSend = new FormData();
        formDataToSend.append('name', name);
        formDataToSend.append('phone', phone);
        formDataToSend.append('source', source);
        formDataToSend.append('message', message || '');
        openConsentModal(formDataToSend, this);
    });
    
    consentAccept.addEventListener('click', function() {
        if (!consentCheckbox.checked) {
            alert('Пожалуйста, подтвердите согласие на обработку персональных данных');
            return;
        }
        if (!formDataToSubmit || !formElement) {
            closeConsentModal();
            return;
        }
        if (formStatus) {
            formStatus.innerText = "Отправка...";
            formStatus.style.color = "var(--muted)";
        }
        closeConsentModal();
        fetch(API_URL, { method: "POST", body: formDataToSubmit })
        .then(response => response.text())
        .then(() => {
            if (formStatus) {
                formStatus.innerText = "Заявка успешно отправлена!";
                formStatus.style.color = "green";
            }
            formElement.reset();
        })
        .catch(() => {
            if (formStatus) {
                formStatus.innerText = "Ошибка отправки, попробуйте позже.";
                formStatus.style.color = "red";
            }
        });
    });
}

// ===== Обработка ошибок загрузки изображений =====
const handleImageError = function() { this.style.display = 'none'; };
const initImageHandlers = () => {
    document.querySelectorAll('img').forEach(img => {
        if (img.complete && !img.naturalHeight) handleImageError.call(img);
        else img.addEventListener('error', handleImageError, { once: true });
    });
};
if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initImageHandlers);
else initImageHandlers();
</script>
</body>
</html>
